{% extends "base.html" %}
{% block extra_style %}
    <style>
        .highlight {
            background-color: yellow;
        }
    </style>
{% endblock %}
{% block content %}
    <h1>Doc search</h1>
    <form method="GET" action="" class="">
        <div class="row row-cols-lg-auto g-3 align-items-center">
            <div class="col-12">
                <label class="" for="query">Search for</label>
                <input id='query' class="form-control form-control-sm" value="{{q}}" type="text" name="query" placeholder="">
            </div>
            <div class="col-12">
                <label class="" for="number">Result count</label>
                <input id="number" class="form-control form-control-sm" value="{{n}}" type="number" name="number" placeholder="">
            </div>
        </div>
        <div class="row">
            <div class="col">
                <div class="accordion " id="accordionExample">
                    <div class="accordion-item " >
                        <h2 class="accordion-header" id="headingOne">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                Extra choices
                            </button>
                        </h2>
                        <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                            <div class="accordion-body">
                                <div class="row row-cols-lg-auto g-3 align-items-center">
                                    <div class="col-12">
                                        <label class="" for="path">Folder name</label>
                                        <input id='path' class="form-control form-control-sm" value="{{path}}" type="text" name="path" placeholder="">
                                    </div>
                                    <div class="col-12">
                                        <label class="" for="created-from">Created date from</label>
                                        <input id='created-from' class="form-control form-control-sm" value="{{created_from}}" type="date" name="created-from" placeholder="">
                                    </div>
                                    <div class="col-12">
                                        <label class="" for="created-to">Created date to</label>
                                        <input id="created-to" class="form-control form-control-sm" value="{{created_to}}" type="date" name="created-to" placeholder="">
                                    </div>
                                    <div class="col-12">
                                        <label class="" for="modified-from">Modified date from</label>
                                        <input id='modified-from' class="form-control form-control-sm" value="{{modified_from}}" type="date" name="modified-from" placeholder="">
                                    </div>
                                    <div class="col-12">
                                        <label class="" for="modified-to">Modified date to</label>
                                        <input id="modified-to" class="form-control form-control-sm" value="{{modified_from}}" type="date" name="modified-to" placeholder="">
                                    </div>
                                    <div class="col-12">
                                        <label class="" for="accessed-from">Access date from</label>
                                        <input id='accessed-from' class="form-control form-control-sm" value="{{accessed_from}}" type="date" name="accessed-from" placeholder="">
                                    </div>
                                    <div class="col-12">
                                        <label class="" for="accessed-from">Access date to</label>
                                        <input id="accessed-to" class="form-control form-control-sm" value="{{accessed_to}}" type="date" name="accessed-from" placeholder="">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <input type="submit" class="btn btn-primary" value="Search">

        <!-- Button trigger modal -->
        <button type="button" class="btn btn-info" data-bs-toggle="modal" data-bs-target="#helpModal">
            How to search
        </button>
    </form>


<!-- Modal -->
<div class="modal fade" id="helpModal" tabindex="-1" aria-labelledby="helpModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="helpModalLabel">How to search</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <ul>
                    <li>Simple: Enter a word and it will search for it using stemming rules for the configured language(i.e if you search for "apple" it will also return documents containing "apples")</li>
                    <li>Phrase: If you want to search for an exact phrase, f.e "hello, world" you need to enter it between quotes. If you enter two words without the quotes it will search for documents containing one of these words. So searching for hello, world (without quotes) will return documents containing hello and documents containing word (see boolean search for more explanation)</li>
                    <li>Wildcard: You can do wildcard search: Searching for app* will return documents containing apple, applying or application. Use ? for a single letter, * for any number of characters and + for at least one character. The wildcard character cannot be on the start of your query, i.e *ppl will not work.</li>
                    <li>Boolean</li>
                    <li>Distance</li>
                </ul>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

    {% for r in results %}
        <li>
            Name: {{ r.name }}<br />
            Path: {{ r.id }}<br />
            Created / modified / Accessed: {{ r.created }} / {{ r.modified }} / {{ r.accessed }}
            Content abstract: {{ r.abstract()|raw }}<br />
            <small>
                Content: {{ r.text|raw }}<br />
            </small>
        </li>
    {% endfor %}
{% endblock %}